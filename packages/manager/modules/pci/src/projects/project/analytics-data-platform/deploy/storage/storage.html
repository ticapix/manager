<div data-ng-if="$ctrl.storage.initialized">
    <!-- HDFS storage -->
    <h4>
        <strong
            >{{ ::'analytics_data_platform_deploy_storage_cluster_title' |
            translate }}</strong
        >
    </h4>
    <p data-translate="analytics_data_platform_deploy_storage_cluster_info"></p>
    <div class="row">
        <div class="col-sm-6">
            <oui-field
                data-label="{{ ::'analytics_data_platform_deploy_storage_cluster_label' | translate }}"
                data-help-text="{{ ::'analytics_data_platform_deploy_storage_cluster_storage_helptext' | translate: {
                        min_storage: $ctrl.storage.min_cluster_storage,
                        max_storage: $ctrl.storage.max_cluster_storage,
                        unit: localizedStorageUnit,
                        } }}"
                data-error-messages="{ pattern: ('analytics_data_platform_deploy_storage_invalid_entry' | translate) }"
                data-size="m"
            >
                <div class="oui-input-group">
                    <input
                        class="oui-input"
                        type="number"
                        id="hdfsEffectiveStorage"
                        name="hdfsEffectiveStorage"
                        required
                        placeholder="{{ ::'analytics_data_platform_deploy_storage_set_quantity' | translate }}"
                        data-ng-min="{{ ::$ctrl.storage.min_cluster_storage }}"
                        data-ng-max="{{ ::$ctrl.storage.max_cluster_storage }}"
                        data-ng-pattern="$ctrl.INPUT_NUMBER_PATTERN"
                        data-ng-model="$ctrl.data.hdfsEffectiveStorage"
                        data-ng-change="$ctrl.dataChange()"
                    />
                    <button
                        class="oui-button oui-button_icon-only oui-button_small-width"
                        type="button"
                        data-translate="analytics_data_platform_common_unit_gb"
                        disabled
                    ></button>
                </div>
            </oui-field>
        </div>
        <div class="col-sm-6">
            <dl class="storage-list">
                <dt class="storage-list__term">
                    <span
                        data-translate="analytics_data_platform_deploy_storage_worker_nodes_count"
                    ></span>
                    :
                </dt>
                <dd
                    class="storage-list__definition"
                    data-ng-bind="::$ctrl.nodesConfig.worker.count"
                ></dd>
                <dt class="storage-list__term">
                    <span
                        data-translate="analytics_data_platform_deploy_storage_per_node"
                    ></span>
                    :
                </dt>
                <dd
                    class="storage-list__definition"
                    data-ng-bind="$ctrl.getStoragePerNode()"
                ></dd>
                <hr class="storage-list__separator" />
                <dt class="storage-list__term">
                    <strong
                        ><span
                            data-translate="analytics_data_platform_deploy_storage_total_storage"
                        ></span>
                        :</strong
                    >
                </dt>
                <dd class="storage-list__definition pb-1">
                    <strong data-ng-bind="$ctrl.getTotalStorage()"></strong>
                    <button
                        type="button"
                        class="oui-popover-button"
                        data-oui-popover="{{ ::'analytics_data_platform_deploy_storage_replication_factor_popover' | translate: {hdfc_replication_factor: $ctrl.selectedCapability.hdfsReplicationFactor} }}"
                    ></button>
                </dd>
            </dl>
        </div>
    </div>
    <div class="mb-1">
        <dt
            class="d-inline font-weight-normal"
            data-translate="analytics_data_platform_deploy_review_hdfs_replication_factor"
        ></dt>
        <span class="ml-1">:</span>
        <dd
            class="d-inline ml-1"
            data-ng-bind="$ctrl.selectedCapability.hdfsReplicationFactor"
        ></dd>
        <p
            class="oui-field__helper"
            data-translate="analytics_data_platform_deploy_storage_hdfs_help"
        ></p>
    </div>
    <!-- edge node storage -->
    <hr class="storage-list__separator w-100" />
    <h4>
        <strong
            data-translate="analytics_data_platform_deploy_storage_edge_node_title"
        ></strong>
    </h4>
    <p
        data-translate="analytics_data_platform_deploy_storage_edge_node_info"
    ></p>
    <div class="row">
        <div class="col-sm-6">
            <oui-field
                data-label="{{ ::'analytics_data_platform_deploy_storage_per_edge_node' | translate }}"
                data-help-text="{{ ::'analytics_data_platform_deploy_storage_cluster_storage_helptext' | translate: {
                        min_storage: $ctrl.storage.min_edge_node_storage,
                        max_storage: $ctrl.storage.max_edge_node_storage,
                        unit: localizedStorageUnit,
                       } }}"
                data-size="m"
                data-error-messages="{ pattern: ('analytics_data_platform_deploy_storage_invalid_entry' | translate) }"
            >
                <div class="oui-input-group">
                    <input
                        class="oui-input"
                        type="number"
                        id="hdfsReplicationFactor"
                        name="hdfsReplicationFactor"
                        required
                        placeholder="{{ ::'analytics_data_platform_deploy_storage_set_quantity' | translate }}"
                        data-ng-model="$ctrl.data.edgeNodeStorage"
                        data-ng-change="$ctrl.dataChange()"
                        data-ng-pattern="$ctrl.INPUT_NUMBER_PATTERN"
                        data-ng-min="{{ ::$ctrl.storage.min_edge_node_storage }}"
                        data-ng-max="{{ ::$ctrl.storage.max_edge_node_storage }}"
                    />
                    <button
                        class="oui-button oui-button_icon-only oui-button_small-width"
                        type="button"
                        data-translate="analytics_data_platform_common_unit_gb"
                        disabled
                    ></button>
                </div>
            </oui-field>
        </div>
        <div class="col-sm-6">
            <dl class="storage-list">
                <dt class="storage-list__term">
                    <span
                        data-translate="analytics_data_platform_deploy_storage_edge_nodes_count"
                    ></span>
                    :
                </dt>
                <dd
                    class="storage-list__definition"
                    data-ng-bind="::$ctrl.nodesConfig.edge.count"
                ></dd>
                <dt class="storage-list__term">
                    <strong
                        ><span
                            data-translate="analytics_data_platform_deploy_storage_total_effective_storage"
                        ></span>
                        :</strong
                    >
                </dt>
                <dd class="storage-list__definition">
                    <strong
                        data-ng-bind="$ctrl.getTotalEffectiveStorage()"
                    ></strong>
                </dd>
            </dl>
        </div>
    </div>
</div>
