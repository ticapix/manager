<div data-ng-controller="ExchangeOrderDiskSpaceCtrl as ctrl">
    <div
        data-wizard
        data-wizard-bread-crumb="true"
        data-wizard-confirm-button-text="'exchange_action_order_space_disk_button' | translate"
        data-wizard-on-cancel="resetAction"
        data-wizard-on-finish="submitting"
        data-wizard-title="'exchange_action_order_space_disk_title' | translate"
    >
        <div data-wizard-step>
            <p
                data-ng-bind-html="'exchange_action_order_space_disk_intro' | translate"
            ></p>

            <oui-spinner data-ng-if="ctrl.loading"></oui-spinner>

            <div data-ng-if="!ctrl.loading">
                <table class="table table-condensed">
                    <tbody>
                        <tr
                            data-ng-repeat="detail in ctrl.order.details track by $index"
                        >
                            <th
                                class="font-weight-normal"
                                scope="row"
                                data-ng-bind="detail.description"
                            ></th>
                            <td
                                class="font-weight-bold text-nowrap text-right"
                                data-ng-bind="ctrl.getResumePrice(detail.totalPrice)"
                            ></td>
                        </tr>
                    </tbody>
                    <tfoot>
                        <tr>
                            <th
                                class="text-right"
                                scope="row"
                                data-translate="exchange_action_order_space_disk_price"
                            ></th>
                            <td
                                class="font-weight-bold text-right"
                                data-ng-bind="ctrl.order.prices.withoutTax.text"
                            ></td>
                        </tr>
                        <tr>
                            <th
                                class="text-right"
                                scope="row"
                                data-translate="exchange_action_order_space_disk_price_iva"
                            ></th>
                            <td
                                class="font-weight-bold text-right"
                                data-ng-bind="ctrl.order.prices.withTax.text"
                            ></td>
                        </tr>
                    </tfoot>
                </table>
            </div>
        </div>

        <!-- Step 2: Contracts -->
        <div
            data-wizard-step
            data-wizard-step-on-load="loadContracts"
            data-wizard-step-valid="getAgreementValue()"
        >
            <div
                data-contracts="ctrl.order.contracts"
                data-full-text="false"
                data-ng-model="ctrl.agree.value"
            ></div>
        </div>

        <!-- Step 3: Resume -->
        <div data-wizard-step data-wizard-step-on-previous="backToContracts">
            <p data-translate="exchange_action_order_space_disk_summary"></p>

            <table class="table table-condensed">
                <tbody>
                    <tr
                        data-ng-repeat="detail in ctrl.order.details track by $index"
                    >
                        <th
                            class="font-weight-normal"
                            scope="row"
                            data-ng-bind="detail.description"
                        ></th>
                        <td
                            class="font-weight-bold text-nowrap text-right"
                            data-ng-bind="ctrl.getResumePrice(detail.totalPrice)"
                        ></td>
                    </tr>
                </tbody>
                <tfoot>
                    <tr>
                        <th
                            class="text-right"
                            scope="row"
                            data-translate="exchange_action_order_space_disk_price"
                        ></th>
                        <td
                            class="font-weight-bold text-right"
                            data-ng-bind="ctrl.order.prices.withoutTax.text"
                        ></td>
                    </tr>
                    <tr>
                        <th
                            class="text-right"
                            scope="row"
                            data-translate="exchange_action_order_space_disk_price_iva"
                        ></th>
                        <td
                            class="font-weight-bold text-right"
                            data-ng-bind="ctrl.order.prices.withTax.text"
                        ></td>
                    </tr>
                </tfoot>
            </table>

            <p data-translate="exchange_action_order_space_disk_final_txt"></p>
            <div
                class="alert alert-info"
                role="alert"
                data-translate="exchange_action_order_space_disk_final_txt2"
            ></div>
        </div>
    </div>
</div>
